"use strict";(self.webpackChunkdocs_vantage_sh=self.webpackChunkdocs_vantage_sh||[]).push([[1086],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>m});var i=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,i,r=function(e,t){if(null==e)return{};var a,i,r={},n=Object.keys(e);for(i=0;i<n.length;i++)a=n[i],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)a=n[i],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=i.createContext({}),g=function(e){var t=i.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=g(e.components);return i.createElement(s.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},c=i.forwardRef((function(e,t){var a=e.components,r=e.mdxType,n=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),p=g(a),c=r,m=p["".concat(s,".").concat(c)]||p[c]||u[c]||n;return a?i.createElement(m,o(o({ref:t},d),{},{components:a})):i.createElement(m,o({ref:t},d))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var n=a.length,o=new Array(n);o[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:r,o[1]=l;for(var g=2;g<n;g++)o[g]=a[g];return i.createElement.apply(null,o)}return i.createElement.apply(null,a)}c.displayName="MDXCreateElement"},7660:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>n,metadata:()=>l,toc:()=>g});var i=a(7462),r=(a(7294),a(3905));const n={id:"virtual_tagging",name:"Virtual Tagging",description:"Create virtual tags within Vantage to provide a consistent tagging schema across cloud providers.",keywords:["Virtual tagging","Vantage tags"]},o="Virtual Tagging",l={unversionedId:"virtual_tagging",id:"virtual_tagging",title:"Virtual Tagging",description:"Create virtual tags within Vantage to provide a consistent tagging schema across cloud providers.",source:"@site/docs/virtual_tagging.md",sourceDirName:".",slug:"/virtual_tagging",permalink:"/virtual_tagging",draft:!1,editUrl:"https://github.com/vantage-sh/docs.vantage.sh/blob/master/docs/virtual_tagging.md",tags:[],version:"current",frontMatter:{id:"virtual_tagging",name:"Virtual Tagging",description:"Create virtual tags within Vantage to provide a consistent tagging schema across cloud providers.",keywords:["Virtual tagging","Vantage tags"]},sidebar:"someSidebar",previous:{title:"Workspaces",permalink:"/workspaces"},next:{title:"API",permalink:"/api"}},s={},g=[{value:"Virtual Tags vs. Saved Filters vs. Cost Allocation Segments",id:"virtual-tags-vs-saved-filters-vs-cost-allocation-segments",level:2},{value:"Create Virtual Tags",id:"create-virtual-tags",level:2},{value:"Virtual Tag Order",id:"virtual-tag-order",level:3},{value:"Filter and Group by Virtual Tags",id:"filter-and-group-by-virtual-tags",level:2},{value:"Virtual Tagging Examples",id:"virtual-tagging-examples",level:2},{value:"Virtual Tagging Example 1: Cross-Provider Tagging",id:"virtual-tagging-example-1-cross-provider-tagging",level:3},{value:"Virtual Tagging Example 2: Consolidate Existing Tags",id:"virtual-tagging-example-2-consolidate-existing-tags",level:3},{value:"Delete a Virtual Tag",id:"delete-a-virtual-tag",level:2}],d={toc:g},p="wrapper";function u(e){let{components:t,...a}=e;return(0,r.kt)(p,(0,i.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"virtual-tagging"},"Virtual Tagging"),(0,r.kt)("p",null,"You can create virtual tags to consistently tag costs across providers in Vantage. This feature can help to increase tagging coverage across your cloud infrastructure. Create cost allocation tag keys with a set of corresponding values and filters directly in the Vantage without needing to involve your engineering team in making infrastructure changes. All provider integrations in Vantage are supported, including providers that don't natively support tags."),(0,r.kt)("p",null,"Virtual tags are available for filtering and aggregating on all ",(0,r.kt)("a",{parentName:"p",href:"/cost_reports"},"Cost Reports")," and ",(0,r.kt)("a",{parentName:"p",href:"/segments"},"cost allocation segments"),". They can also be used in filter criteria on ",(0,r.kt)("a",{parentName:"p",href:"/saved_filters"},"saved filters"),". There is no limit to the number of tag keys or values you define."),(0,r.kt)("h2",{id:"virtual-tags-vs-saved-filters-vs-cost-allocation-segments"},"Virtual Tags vs. Saved Filters vs. Cost Allocation Segments"),(0,r.kt)("p",null,"Virtual tags can be considered foundational to the rest of the data within Vantage. They should remain fairly static, and changes should be considered delicate. These changes will flow across all data and apply to all workspaces. The most common tag keys will be items like team, cost center, and environment. "),(0,r.kt)("p",null,"Segments can then be used to create different hierarchical views for tagged data. This feature is useful for breaking down the data by different perspectives, such as by cost center or by OPEX/CapEX."),(0,r.kt)("p",null,"Saved filters can then be used in a more ad-hoc fashion to add lenses on top of base data. For instance, you could create a saved filter just for ",(0,r.kt)("em",{parentName:"p"},"North America")," that standardizes a set of regions across providers and can be used by teams on their reports or dashboards without having to know the set of filters needed to create the list of regions. When new regions come online, it\u2019s easy to modify the saved filter to include this region."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"If you want to transition any of your cost allocation segments to virtual tags, contact ",(0,r.kt)("a",{parentName:"p",href:"mailto:support@vantage.sh"},"support@vantage.sh"),".")),(0,r.kt)("h2",{id:"create-virtual-tags"},"Create Virtual Tags"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"This feature requires ",(0,r.kt)("em",{parentName:"p"},"Owner")," permissions in Vantage. See the ",(0,r.kt)("a",{parentName:"p",href:"/rbac"},"Role-Based Access Control")," documentation for details. Virtual tags apply to all ",(0,r.kt)("a",{parentName:"p",href:"/workspaces"},"workspaces"),".")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"From the top navigation, click ",(0,r.kt)("strong",{parentName:"li"},"Settings"),"."),(0,r.kt)("li",{parentName:"ol"},"From the side navigation, under ",(0,r.kt)("strong",{parentName:"li"},"General Settings"),", click ",(0,r.kt)("strong",{parentName:"li"},"Virtual Tags"),". "),(0,r.kt)("li",{parentName:"ol"},"All existing virtual tags are displayed alphabetically. You can edit and delete any existing tags from this screen. To add a new virtual tag, click ",(0,r.kt)("strong",{parentName:"li"},"Create a Virtual Tag"),". "),(0,r.kt)("li",{parentName:"ol"},"Enter a title for the ",(0,r.kt)("strong",{parentName:"li"},"Tag Key"),". "),(0,r.kt)("li",{parentName:"ol"},"For ",(0,r.kt)("strong",{parentName:"li"},"Billing Period Backfill"),", select a billing period (e.g., ",(0,r.kt)("strong",{parentName:"li"},"Apr 2024"),") for which the tag should be backfilled. "),(0,r.kt)("li",{parentName:"ol"},"Enable the ",(0,r.kt)("strong",{parentName:"li"},"Can Override")," toggle if you want the virtual tag to override an existing service cost value. For example, if you create a virtual tag that conflicts with an existing provider tag, this option will override the existing provider tag key in Vantage reports."),(0,r.kt)("li",{parentName:"ol"},"In the ",(0,r.kt)("strong",{parentName:"li"},"Values")," section, click ",(0,r.kt)("strong",{parentName:"li"},"+Add a Value"),":",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Enter a ",(0,r.kt)("strong",{parentName:"li"},"Tag Value")," title.",(0,r.kt)("admonition",{parentName:"li",type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Titles can contain only letters, numbers, and the following characters: _ - & + , . : / \\"))),(0,r.kt)("li",{parentName:"ul"},"Click ",(0,r.kt)("strong",{parentName:"li"},"+ Add a Filter")," and specify the tag value\u2019s filter criteria. Virtual tag filters function just like filters on Cost Reports and cost allocation segments. For information on how to create detailed filters, see the ",(0,r.kt)("a",{parentName:"li",href:"/cost_reports#filtering-cost-reports"},"Cost Reports")," documentation. ",(0,r.kt)("admonition",{parentName:"li",type:"note"},(0,r.kt)("p",{parentName:"admonition"},"You cannot use saved filters to define a virtual tag value's filters."))))),(0,r.kt)("li",{parentName:"ol"},"At the top, click ",(0,r.kt)("strong",{parentName:"li"},"Save"),".")),(0,r.kt)("p",null,"Processing tag changes usually takes under an hour. At the top of the ",(0,r.kt)("strong",{parentName:"p"},"Virtual Tags")," screen, the processing status is displayed. Processing times vary based on the number of tags and volume of data you have imported into Vantage."),(0,r.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,r.kt)("img",{alt:"The Virtual Tag screen with a processing status displayed for Fastly and New Relic",width:"80%",src:"/img/virtual-tag-status.png"})),(0,r.kt)("h3",{id:"virtual-tag-order"},"Virtual Tag Order"),(0,r.kt)("p",null,"Tag values are arranged in priority order on the ",(0,r.kt)("strong",{parentName:"p"},"Virtual Tags")," screen. You can move tag values up and down in the UI to reorder them, as demonstrated in the visual example below. "),(0,r.kt)("div",{style:{display:"flex",justifyContent:"center",boxShadow:"0 0 10px rgba(0, 0, 0, 0.2)",borderRadius:"10px",overflow:"hidden"}},(0,r.kt)("img",{alt:"GIF of two tag values, staging and production, being reordered in the Tags UI",width:"80%",src:"/img/reorder-tags.gif"})),(0,r.kt)("br",null),(0,r.kt)("p",null,"When cost data is ingested into Vantage, the first value that matches the corresponding filters will be applied to that line item. In cases where filters overlap, the order of tag values within each key determines the value that is applied."),(0,r.kt)("h2",{id:"filter-and-group-by-virtual-tags"},"Filter and Group by Virtual Tags"),(0,r.kt)("p",null,"You can filter by virtual tags in Cost Reports, cost allocation segments, and when creating saved filters. Virtual tags are visible along with your existing provider tags. Use the ",(0,r.kt)("strong",{parentName:"p"},"Tag")," (",(0,r.kt)("strong",{parentName:"p"},"Label")," in GCP) filter and grouping option. "),(0,r.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,r.kt)("img",{alt:"A Cost Report filter with two filters applied: one for AWS costs for the team/data tag and one for GCP costs with the same tag",width:"80%",src:"/img/virtual-tag-consolidate-report.png"})),(0,r.kt)("h2",{id:"virtual-tagging-examples"},"Virtual Tagging Examples"),(0,r.kt)("p",null,"The following examples demonstrate how to use virtual tagging in a multi-provider organization. "),(0,r.kt)("h3",{id:"virtual-tagging-example-1-cross-provider-tagging"},"Virtual Tagging Example 1: Cross-Provider Tagging"),(0,r.kt)("p",null,"You want to create a tag mapping for each of your teams that maps corresponding teams with certain services and provider accounts."),(0,r.kt)("p",null,"You create a tag key called ",(0,r.kt)("inlineCode",{parentName:"p"},"Teams"),". "),(0,r.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,r.kt)("img",{alt:"The Tag Key field displayed in the Virtual Tags UI; the name Teams is entered",width:"80%",src:"/img/virtual-provider-tag-key.png"})),(0,r.kt)("p",null,"You add the corresponding set of virtual tag values and filters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},"data")," team tag value corresponds with a filter for all costs for GCP BigQuery and Amazon Redshift."),(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},"mobile")," team tag value corresponds with a filter for its related GCP projects and AWS accounts."),(0,r.kt)("li",{parentName:"ul"},"You continue this pattern and create similar values with corresponding filters for your other teams.")),(0,r.kt)("div",{style:{display:"flex",overflow:"scroll"}},(0,r.kt)("img",{alt:"A sample Tag Value field for a value of data with filter for Service of BigQuery and Amazon Redshift",width:"60%",src:"/img/virtual-tag-provider-value-1.png"}),(0,r.kt)("img",{alt:"A sample Tag Value field for a value of data with a filter for GCP Project of mobile and AWS account of mobile",width:"60%",src:"/img/virtual-tag-provider-value-2.png"})),(0,r.kt)("p",null,"Within Cost Reports, you can easily filter and group by these tag options to easily see costs for an individual team. In the below visual example, the Cost Report is grouped by the ",(0,r.kt)("strong",{parentName:"p"},"team")," tag, and the ",(0,r.kt)("strong",{parentName:"p"},"mobile")," and ",(0,r.kt)("strong",{parentName:"p"},"data")," values are displayed along with the other team tag values you created."),(0,r.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,r.kt)("img",{alt:"A sample Cost Report grouped by Tag showing a mobile and data tag",width:"100%",src:"/img/virtual-tag-provider-report.png"})),(0,r.kt)("h3",{id:"virtual-tagging-example-2-consolidate-existing-tags"},"Virtual Tagging Example 2: Consolidate Existing Tags"),(0,r.kt)("p",null,"You have a tagging practice established at your organization, but teams often create tags with spelling variations, tags with typos, or they create duplicate tags. For example, the ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," team has resources tagged with ",(0,r.kt)("inlineCode",{parentName:"p"},"data"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"Data"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"data-prod"),". This is an issue across many of your teams. You want to consolidate all these tags, across providers, into one ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," tag. "),(0,r.kt)("p",null,"You create a tag key called ",(0,r.kt)("inlineCode",{parentName:"p"},"Teams")," to override existing tags."),(0,r.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,r.kt)("img",{alt:"The Tag Key field displayed in the Virtual Tags UI; the name Teams is entered",width:"80%",src:"/img/virtual-provider-tag-key.png"})),(0,r.kt)("p",null,"You add the corresponding set of virtual tag values and filters. In this example, all permutations of the ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," team tag are combined into one virtual tag."),(0,r.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,r.kt)("img",{alt:"A sample Tag Value field for a value of AWS team tags equaling data, data-prod, and Data. Another value for a GCP team Label equaling data",width:"80%",src:"/img/virtual-tag-consolidate-value.png"})),(0,r.kt)("p",null,"Within Cost Reports, you can easily filter by this tag to see all costs related to the ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," team. This saves you the work of needing to always filter for all permutations of this tag. Now, you need to filter by only one tag."),(0,r.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,r.kt)("img",{alt:"A Cost Report with a filter for AWS and GCP team tag of data",width:"80%",src:"/img/virtual-tag-consolidate-report.png"})),(0,r.kt)("h2",{id:"delete-a-virtual-tag"},"Delete a Virtual Tag"),(0,r.kt)("p",null,"To delete a virtual tag, navigate to the ",(0,r.kt)("a",{parentName:"p",href:"https://console.vantage.sh/settings/virtual_tags"},"Virtual Tags")," page. All existing tag keys are displayed. Click the trashcan icon next to a tag key. Your data will be re-tagged, excluding the deleted virtual tag, going back to the deleted tag\u2019s backfill bill period. Newly ingested data will no longer be tagged with the deleted tag."))}u.isMDXComponent=!0}}]);