<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-connecting_aws">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Setup AWS | Vantage Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://assets.vantage.sh/blog/vntg-social-preview.png"><meta data-rh="true" name="twitter:image" content="https://assets.vantage.sh/blog/vntg-social-preview.png"><meta data-rh="true" property="og:url" content="https://docs.vantage.sh/connecting_aws"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Setup AWS | Vantage Documentation"><meta data-rh="true" name="description" content="Connecting Your AWS Account"><meta data-rh="true" property="og:description" content="Connecting Your AWS Account"><link data-rh="true" rel="icon" href="https://assets.vantage.sh/www/favicon-32x32.png"><link data-rh="true" rel="canonical" href="https://docs.vantage.sh/connecting_aws"><link data-rh="true" rel="alternate" href="https://docs.vantage.sh/connecting_aws" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.vantage.sh/connecting_aws" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-166045679-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><link rel="stylesheet" href="/assets/css/styles.2c8fe000.css">
<link rel="preload" href="/assets/js/runtime~main.e487cf03.js" as="script">
<link rel="preload" href="/assets/js/main.a68d8dea.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://vantage.sh" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/nav-logo.svg" alt="Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/nav-logo.svg" alt="Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/getting_started">Documentation</a><a href="https://vantage.sh/pricing" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Pricing</a></div><div class="navbar__items navbar__items--right"><a href="https://console.vantage.sh/signup" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Sign Up</a><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/">Get Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/connecting_aws">Integrations</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/connecting_aws">AWS</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/connecting_aws">Setup AWS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/permissions_aws">AWS Permissions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/syncing">Syncing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/supported_services">AWS Services &amp; Regions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/security">Security</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/connecting_azure">Azure</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/connecting_gcp">Google Cloud</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/connecting_kubernetes">Kubernetes</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/connecting_datadog">Datadog</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/connecting_mongodb-atlas">MongoDB Atlas</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/connecting_snowflake">Snowflake</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/connecting_databricks">Databricks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/connecting_fastly">Fastly</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/overview">Features</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/overview">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/cost_reports">Cost Reporting</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/autopilot">Optimization</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/reports">Notifications</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/workspaces">Workspaces</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Integrations</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">AWS</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Setup AWS</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Setup AWS</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="connecting-your-aws-account">Connecting Your AWS Account<a href="#connecting-your-aws-account" class="hash-link" aria-label="Direct link to Connecting Your AWS Account" title="Direct link to Connecting Your AWS Account">​</a></h2><p>Vantage understands security concerns and aims to provide as secure of a connection as possible with your AWS accounts. Vantage uses a mechanism called a &quot;Cross Account IAM Role&quot; to interact with services in your AWS account. AWS has <a href="https://aws.amazon.com/blogs/apn/securely-accessing-customer-aws-accounts-with-cross-account-iam-roles/" target="_blank" rel="noopener noreferrer">publicly documented</a> this method and officially recommends it as the preferred method of doing any cross account interactions on AWS. Numerous internal AWS services and systems also leverage this method.</p><p>This means that Vantage <strong>never</strong> needs access credentials, account logins or passwords.</p><p>Note that everyone who works at Vantage has previously worked in public cloud infrastructure including companies like AWS, DigitalOcean, Github, Akamai and Cloudflare and we are taking best practices learned at those companies into consideration when building Vantage.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="read-only-by-default">Read Only by Default<a href="#read-only-by-default" class="hash-link" aria-label="Direct link to Read Only by Default" title="Direct link to Read Only by Default">​</a></h3><p>When you create a Cross Account IAM Role using the provided CloudFormation template you are giving Vantage various <a href="https://docs.vantage.sh/permissions_aws/" target="_blank" rel="noopener noreferrer">permissions</a>. All of the permissions by default are ReadOnly. The list of permissions was created by using the official AWS ReadOnly policy and removing some of the permissions AWS includes in that list in order to prevent Vantage from seeing information like reading from S3 Buckets and reading from databases.</p><p>Vantage only collects metadata about your infrastructure and never even attempts to read sensitive information from the underlying services. Our CloudFormation template is public and you may audit the list of permissions <a href="https://vantage-public.s3.amazonaws.com/vantage-integration-latest.json" target="_blank" rel="noopener noreferrer">here</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="connecting-multiple-aws-accounts">Connecting Multiple AWS Accounts<a href="#connecting-multiple-aws-accounts" class="hash-link" aria-label="Direct link to Connecting Multiple AWS Accounts" title="Direct link to Connecting Multiple AWS Accounts">​</a></h3><p>Vantage allows you to connect multiple AWS accounts. We advise that you connect your master AWS account first. By default, we require you to start with one AWS account and ensure it properly connected. Upon connecting a master AWS account, Vantage will profile for all member accounts present in the organization. Vantage will be able to show you accrued costs from all member accounts in the organization as well as active resources that are present in that <em>master AWS account</em>.</p><p>In the event that you have multiple member accounts and want to view Active Resources present in those accounts, Vantage will offer you the ability to run something called a CloudFormation StackSet that will create one role per AWS member account. You&#x27;re also welcome to skip this step and add/remove AWS accounts from your <a href="https://console.vantage.sh/settings/workspaces" target="_blank" rel="noopener noreferrer">account settings</a> whenever you see fit.</p><p>We recommend using StackSets if you have several accounts you would like to connect. This will automate the process for all of the accounts in your Organizational Unit. When connecting your account, if you have at least one member account, you will see instructions specific to your account on how to connect your member accounts using StackSets.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="stackset-prerequisites">StackSet Prerequisites<a href="#stackset-prerequisites" class="hash-link" aria-label="Direct link to StackSet Prerequisites" title="Direct link to StackSet Prerequisites">​</a></h3><p>Note that in order to leverage StackSets, you must enable organizations access to operate a service managed stack set. You&#x27;ll need to enable this in the AWS Console UI. In the event you don&#x27;t have this enabled and attempt to run a StackSet command you&#x27;ll get the following error:</p><p><code>An error occurred (ValidationError) when calling the CreateStackSet operation: You must enable organizations access to operate a service managed stack set</code></p><p>AWS maintains instructions for the latest way of enabling this which you can find <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stacksets-prereqs.html" target="_blank" rel="noopener noreferrer">here</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="connecting-with-terraform">Connecting with Terraform<a href="#connecting-with-terraform" class="hash-link" aria-label="Direct link to Connecting with Terraform" title="Direct link to Connecting with Terraform">​</a></h3><p>If you manage your infrastructure with Terraform it is very easy to connect to Vantage. During onboarding, instead of following the CloudFormation process, you can click on the terraform instructions which will give you the proper IAM Role creation snippets which can be dropped into your Terraform codebase. Once you create the roles you can enter the ARN of the IAM Role which was created to complete the connection process.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="connecting-by-manually-creating-an-iam-role">Connecting by Manually Creating an IAM Role<a href="#connecting-by-manually-creating-an-iam-role" class="hash-link" aria-label="Direct link to Connecting by Manually Creating an IAM Role" title="Direct link to Connecting by Manually Creating an IAM Role">​</a></h3><p>If you would like to create IAM Roles manually or use another tool to manage your infrastructure you can create the necessary cross account role. During onboarding, instead of following the Cloudformation process, you can click on the IAM Role option and you will be presented with a Trust Relationship and an Inline Policy that are required for the role. After creating the role, return to the onboarding page to submit the ARN of the created role to complete the connection.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aws-data-ingestion-delay">AWS Data Ingestion Delay<a href="#aws-data-ingestion-delay" class="hash-link" aria-label="Direct link to AWS Data Ingestion Delay" title="Direct link to AWS Data Ingestion Delay">​</a></h3><p>As of June 2022, Vantage now creates both an IAM Role as well as a cost and usage report integration through the same provided CloudFormation template and terraform file. While an IAM Role is created within a minute and historical data can be populated nearly immediately, it can take AWS around 6 or 7 hours to deliver the first cost and usage report to Vantage. As a result, only partial data will be present until this first cost and usage report is received.</p><p>This will impact a few things in the Vantage console.</p><ul><li><a href="/active_resources">Active Resources</a> will only show hourly and monthly <em>rates</em> initially. When the first cost and usage report is received, you can see actual accrued costs per resource broken down by cost category and subcategory.</li><li><a href="/cost_reports">Cost Reports</a> will show line-item data per service initially but will not be able to show &quot;costs by resource&quot; until the first cost and usage report is received.</li><li>Both <a href="/autopilot/">Autopilot</a> and <a href="/savings_planner/">Savings Planner</a> are unavailable until this first cost and usage report is received.</li></ul><p>Once Vantage receives its first cost and usage report, this functionality will automatically be made available and Vantage will send you an email letting you know. Ultimately this is a limitation imposed by AWS and we need to wait for them to deliver this data.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/vantage-sh/docs.vantage.sh/blob/master/docs/connecting_aws.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/vantage_account"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Vantage Account</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/permissions_aws"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">AWS Permissions</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#connecting-your-aws-account" class="table-of-contents__link toc-highlight">Connecting Your AWS Account</a><ul><li><a href="#read-only-by-default" class="table-of-contents__link toc-highlight">Read Only by Default</a></li><li><a href="#connecting-multiple-aws-accounts" class="table-of-contents__link toc-highlight">Connecting Multiple AWS Accounts</a></li><li><a href="#stackset-prerequisites" class="table-of-contents__link toc-highlight">StackSet Prerequisites</a></li><li><a href="#connecting-with-terraform" class="table-of-contents__link toc-highlight">Connecting with Terraform</a></li><li><a href="#connecting-by-manually-creating-an-iam-role" class="table-of-contents__link toc-highlight">Connecting by Manually Creating an IAM Role</a></li><li><a href="#aws-data-ingestion-delay" class="table-of-contents__link toc-highlight">AWS Data Ingestion Delay</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/getting_started">Integrations</a></li><li class="footer__item"><a class="footer__link-item" href="/cost_reports">Cost Reports</a></li><li class="footer__item"><a class="footer__link-item" href="/autopilot">Autopilot</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://join.slack.com/t/vantagecommunity/shared_invite/zt-oey52myv-gq4AWRKkX25kjp1UGziPTw" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cloud Costs Handbook</a></li><li class="footer__item"><a href="https://instances.vantage.sh/" target="_blank" rel="noopener noreferrer" class="footer__link-item">AWS Instances Pricing</a></li><li class="footer__item"><a href="https://instances.vantage.sh/azure" target="_blank" rel="noopener noreferrer" class="footer__link-item">Azure VM Pricing Comparison</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://vantage.sh/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Vantage Blog</a></li><li class="footer__item"><a href="https://github.com/vantage-sh" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 VNTG, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.e487cf03.js"></script>
<script src="/assets/js/main.a68d8dea.js"></script>
</body>
</html>