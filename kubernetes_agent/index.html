<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-kubernetes_agent">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Vantage Kubernetes Agent | Vantage Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://assets.vantage.sh/blog/vntg-social-preview.png"><meta data-rh="true" name="twitter:image" content="https://assets.vantage.sh/blog/vntg-social-preview.png"><meta data-rh="true" property="og:url" content="https://docs.vantage.sh/kubernetes_agent"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Vantage Kubernetes Agent | Vantage Documentation"><meta data-rh="true" name="description" content="This page walks through how to connect the Vantage Kubernetes agent with your Kubernetes cluster."><meta data-rh="true" property="og:description" content="This page walks through how to connect the Vantage Kubernetes agent with your Kubernetes cluster."><link data-rh="true" rel="icon" href="https://assets.vantage.sh/www/favicon-32x32.png"><link data-rh="true" rel="canonical" href="https://docs.vantage.sh/kubernetes_agent"><link data-rh="true" rel="alternate" href="https://docs.vantage.sh/kubernetes_agent" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.vantage.sh/kubernetes_agent" hreflang="x-default"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-TSMQ34V",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script><link rel="stylesheet" href="/assets/css/styles.366f1f65.css">
<link rel="preload" href="/assets/js/runtime~main.f1f15023.js" as="script">
<link rel="preload" href="/assets/js/main.4711f18b.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>



<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TSMQ34V" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://vantage.sh" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/nav-logo.svg" alt="Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/nav-logo.svg" alt="Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/">Docs</a><a href="https://vantage.readme.io/reference/general" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">API</a><a href="https://vantage.sh/pricing" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Pricing</a></div><div class="navbar__items navbar__items--right"><a href="https://console.vantage.sh/signup" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Sign Up</a><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Vantage Kubernetes Agent</h1><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Early Access</div><div class="admonitionContent_S0QG"><p>The Vantage Kubernetes agent is currently in Early Access.</p></div></div><p>The Vantage Kubernetes agent is the default, recommended configuration to ingest cost and usage data from Kubernetes clusters to Vantage. The agent is a Docker container that&#x27;s run in your Kubernetes cluster. The agent collects metrics and uploads them to Vantage. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="agent-functionality">Agent Functionality<a href="#agent-functionality" class="hash-link" aria-label="Direct link to Agent Functionality" title="Direct link to Agent Functionality">​</a></h2><p>The Vantage Kubernetes agent relies on native Kubernetes APIs, such as <code>kube-apiserver</code> for metadata and <code>kubelet</code> for container data. Access to these APIs is controlled via Kubernetes RBAC using a Service Account and ClusterRole, included in the Vantage <a href="https://github.com/vantage-sh/helm-charts" target="_blank" rel="noopener noreferrer">Kubernetes Agent Helm chart</a>. </p><p>Data is periodically collected and stored for aggregation, then sent directly to the Vantage service through an API, with your Vantage API token for authentication. This process avoids extra storage costs incurred by the OpenCost integration. The agent&#x27;s architecture eliminates the need for deploying OpenCost-specific Prometheus pods, which makes scaling easier. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="service-compatibility">Service Compatibility<a href="#service-compatibility" class="hash-link" aria-label="Direct link to Service Compatibility" title="Direct link to Service Compatibility">​</a></h2><p>The Vantage Kubernetes agent is compatible with the following services: </p><ul><li>Amazon Elastic Kubernetes Service (EKS)</li><li>Azure Kubernetes Service (AKS)</li><li>Google Kubernetes Engine (GKE)</li></ul><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>At this time, the agent does not support custom rates for on-premises servers. Note that this is a planned future feature. If you have an on-premises cluster and would like to track these costs, see the <a href="/opencost">OpenCost</a> documentation.</p></div></div><p>As long as the cost data for an underlying cluster instance is ingested into Vantage via a cloud integration, it is possible to calculate the corresponding pod costs.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="install-vantage-kubernetes-agent">Install Vantage Kubernetes Agent<a href="#install-vantage-kubernetes-agent" class="hash-link" aria-label="Direct link to Install Vantage Kubernetes Agent" title="Direct link to Install Vantage Kubernetes Agent">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h3><p>The following prerequisites are required before you install the Vantage Kubernetes agent:</p><ul><li><p>The <a href="https://helm.sh/" target="_blank" rel="noopener noreferrer">Helm package manager</a> for Kubernetes </p></li><li><p><code>kubectl</code></p></li><li><p>A running Kubernetes cluster</p></li><li><p>A <a href="/vantage_account#get-a-vantage-api-token">Vantage API token</a> with READ and WRITE scopes enabled</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-connection">Create a Connection<a href="#create-a-connection" class="hash-link" aria-label="Direct link to Create a Connection" title="Direct link to Create a Connection">​</a></h2><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>The following steps are also provided in the Vantage Kubernetes agent Helm chart repository. See <a href="https://github.com/vantage-sh/helm-charts/tree/main/charts/vantage-kubernetes-agent" target="_blank" rel="noopener noreferrer">the Helm chart repository</a> for all value configurations.</p></div></div><p>To set up a <em>new</em> Kubernetes agent connection:</p><ol><li><p>Add the repository for the Vantage Kubernetes agent Helm chart. </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm repo </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> vantage https://vantage-sh.github.io/helm-charts</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Install the <code>vantage-kubernetes-agent</code> Helm chart. Ensure you update the values for <code>VANTAGE_API_TOKEN</code> (obtained in the <a href="/kubernetes_agent#prerequisites">Prerequisites</a> above) and <code>CLUSTER_ID</code> (the unique value for your cluster).</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm upgrade -n vantage vka vantage/vantage-kubernetes-agent --install --set agent.token</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$VANTAGE_API_TOKEN</span><span class="token plain">,agent.clusterID</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$CLUSTER_ID</span><span class="token plain"> --create-namespace</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The limits provided within the Helm chart are set low to support small clusters (approximately 10 nodes) and should be considered the minimum values for deploying an agent.</p><p>Estimates for later clusters are roughly:</p><ul><li>~1 CPU/1000 node</li><li>~2 MB/node</li></ul><p>For example, a 100-node cluster would be approximately 200 MB and 100 mCPU. These amounts are estimates, which will vary based on node density, label usage, cluster activity, etc. The agent should reach an approximate steady state after about one hour of uptime and can be tuned accordingly after the fact.</p><p>To set these options, extend the <code>--set</code> flag. You can also include the values using one of the <a href="https://helm.sh/docs/chart_template_guide/values_files/" target="_blank" rel="noopener noreferrer">many options Helm supports</a>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">--set agent.token=$VANTAGE_API_TOKEN,agent.clusterID=$CLUSTER_ID,resources.limits.memory=100Mi,resources.requests.memory=100Mi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="validate-installation">Validate Installation<a href="#validate-installation" class="hash-link" aria-label="Direct link to Validate Installation" title="Direct link to Validate Installation">​</a></h3><p>Follow the steps below to validate the agent&#x27;s installation. </p><ol><li>Once installed, the agent&#x27;s pod should become <code>READY</code>:<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">➜ kubectl -n vantage get po</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                             READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vka-vantage-kubernetes-agent-0   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          54m</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>Logs should be free of <code>ERROR</code> messages:<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">➜  containers kubectl -n vantage logs -f vka-vantage-kubernetes-agent-0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;time&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;2023-10-23T22:01:12.065481528Z&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;level&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;INFO&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;msg&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;found nodes&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;nodes&quot;</span><span class="token plain">:2</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;time&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;2023-10-23T22:01:12.471399742Z&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;level&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;INFO&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;msg&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;finished initializing&quot;</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>Agent reporting should occur once per hour at the start of the hour and should not generate an <code>ERROR</code> log line. It should also attempt a report soon after the initial start:<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;time&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;2023-10-23T22:01:00.015243974Z&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;level&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;INFO&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;msg&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;reporting now&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;time&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;2023-10-23T22:01:01.168390414Z&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;level&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;INFO&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;msg&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;finished reporting&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;time&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;2023-10-23T22:01:01.169876296Z&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;level&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;INFO&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;msg&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;next report window&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;start&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;2023-10-23T22:00:00Z&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;end&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;2023-10-23T23:00:00Z&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;sleeping_seconds&quot;</span><span class="token plain">:3598.830199804</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><p>Costs are exported from the cluster hourly and then made available nightly. It&#x27;s important to note that these costs might encounter delays based on their associated cloud integration&#x27;s cost data. For instance, if there is a one-day delay in an AWS Cost and Usage Report, the clusters dependent on that data will experience a similar delay.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="migrate-costs-from-opencost-to-vantage-kubernetes-agent">Migrate Costs from OpenCost to Vantage Kubernetes Agent<a href="#migrate-costs-from-opencost-to-vantage-kubernetes-agent" class="hash-link" aria-label="Direct link to Migrate Costs from OpenCost to Vantage Kubernetes Agent" title="Direct link to Migrate Costs from OpenCost to Vantage Kubernetes Agent">​</a></h2><p>If you are moving from an OpenCost integration to the agent-based integration, you can contact <a href="mailto:support@vantage.sh" target="_blank" rel="noopener noreferrer">support@vantage.sh</a> to have your previous integration data maintained.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="maintaining-opencost-filters">Maintaining OpenCost Filters<a href="#maintaining-opencost-filters" class="hash-link" aria-label="Direct link to Maintaining OpenCost Filters" title="Direct link to Maintaining OpenCost Filters">​</a></h3><p>If you previously used the OpenCost integration and are transitioning to the new agent-based integration, your existing filters will be retained. It&#x27;s important to note that in situations where labels contained characters excluded from Prometheus labels, such as <code>-</code>, the OpenCost integration received the normalized versions of those labels from Prometheus. The Vantage Kubernetes agent, on the other hand, directly retrieves labels from the <code>kube-apiserver</code>, resulting in more precise data. However, this change may necessitate updates to filters that previously relied on the normalized values. You can contact <a href="mailto:support@vantage.sh" target="_blank" rel="noopener noreferrer">support@vantage.sh</a> to have these filters converted for you.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/vantage-sh/docs.vantage.sh/blob/master/docs/kubernetes_agent.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#agent-functionality" class="table-of-contents__link toc-highlight">Agent Functionality</a></li><li><a href="#service-compatibility" class="table-of-contents__link toc-highlight">Service Compatibility</a></li><li><a href="#install-vantage-kubernetes-agent" class="table-of-contents__link toc-highlight">Install Vantage Kubernetes Agent</a><ul><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li></ul></li><li><a href="#create-a-connection" class="table-of-contents__link toc-highlight">Create a Connection</a><ul><li><a href="#validate-installation" class="table-of-contents__link toc-highlight">Validate Installation</a></li></ul></li><li><a href="#migrate-costs-from-opencost-to-vantage-kubernetes-agent" class="table-of-contents__link toc-highlight">Migrate Costs from OpenCost to Vantage Kubernetes Agent</a><ul><li><a href="#maintaining-opencost-filters" class="table-of-contents__link toc-highlight">Maintaining OpenCost Filters</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/getting_started">Integrations</a></li><li class="footer__item"><a class="footer__link-item" href="/cost_reports">Cost Reports</a></li><li class="footer__item"><a class="footer__link-item" href="/autopilot">Autopilot</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://vantage.sh/slack" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://handbook.vantage.sh/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cloud Costs Handbook</a></li><li class="footer__item"><a href="https://instances.vantage.sh/" target="_blank" rel="noopener noreferrer" class="footer__link-item">AWS Instances Pricing</a></li><li class="footer__item"><a href="https://instances.vantage.sh/azure" target="_blank" rel="noopener noreferrer" class="footer__link-item">Azure VM Pricing Comparison</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://vantage.readme.io/reference/general" target="_blank" rel="noopener noreferrer" class="footer__link-item">API Documentation</a></li><li class="footer__item"><a href="https://vantage.sh/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Vantage Blog</a></li><li class="footer__item"><a href="https://github.com/vantage-sh" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://status.vantage.sh/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Vantage Status</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 VNTG, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.f1f15023.js"></script>
<script src="/assets/js/main.4711f18b.js"></script>
</body>
</html>